<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:OneFinance.ViewModels"
             xmlns:models="using:OneFinance.Models"
             x:Class="OneFinance.Views.TransactionFormView"
             x:DataType="vm:TransactionFormViewModel">
    <ScrollViewer>
        <StackPanel Margin="24" Spacing="16" MaxWidth="400">
            <Button Content="â† Back" Command="{Binding CancelCommand}" Background="Transparent" Padding="0"/>
            <TextBlock Text="{Binding Title}" FontSize="28" FontWeight="Bold"/>

            <StackPanel Spacing="8">
                <TextBlock Text="Type"/>
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <RadioButton Content="Expense" IsChecked="{Binding IsExpenseSelected}" GroupName="Type"/>
                    <RadioButton Content="Income" IsChecked="{Binding IsIncomeSelected}" GroupName="Type"/>
                </StackPanel>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Amount"/>
                <NumericUpDown Value="{Binding Amount}" FormatString="C2" Minimum="0"/>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Description"/>
                <TextBox Text="{Binding Description}" Watermark="Enter description..."/>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Date"/>
                <DatePicker SelectedDate="{Binding Date}"/>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Category"/>
                <ComboBox ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory}" HorizontalAlignment="Stretch">
                    <ComboBox.ItemTemplate>
                        <DataTemplate x:DataType="models:Category">
                            <TextBlock Text="{Binding Name}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>

            <StackPanel Spacing="8">
                <TextBlock Text="Account"/>
                <ComboBox ItemsSource="{Binding Accounts}" SelectedItem="{Binding SelectedAccount}" HorizontalAlignment="Stretch">
                    <ComboBox.ItemTemplate>
                        <DataTemplate x:DataType="models:Account">
                            <TextBlock Text="{Binding Name}"/>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>

            <TextBlock Text="{Binding ErrorMessage}" Foreground="#EF4444" IsVisible="{Binding HasError}"/>

            <Grid ColumnDefinitions="*,*" Margin="0,16,0,0">
                <Button Content="Cancel" Command="{Binding CancelCommand}" HorizontalAlignment="Stretch" Margin="0,0,4,0"/>
                <Button Grid.Column="1" Content="{Binding SaveButtonText}" Command="{Binding SaveCommand}" Background="#0078D4" Foreground="White" HorizontalAlignment="Stretch" Margin="4,0,0,0"/>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</UserControl>
