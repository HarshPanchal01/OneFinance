<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:OneFinance.ViewModels"
             x:Class="OneFinance.Views.TransactionsView"
             x:DataType="vm:TransactionsViewModel">
    <Grid RowDefinitions="Auto,Auto,*">
        <Grid Margin="24,24,24,0" ColumnDefinitions="*,Auto">
            <TextBlock Text="Transactions" FontSize="28" FontWeight="Bold"/>
            <Button Grid.Column="1" Content="+ Add" Command="{Binding AddTransactionCommand}" Background="#0078D4" Foreground="White"/>
        </Grid>

        <Border Grid.Row="1" Margin="24,16" Padding="16" Background="#2D2D2D" CornerRadius="8">
            <Grid ColumnDefinitions="*,*">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="Income" Opacity="0.7" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding TotalIncome, StringFormat=C2}" FontSize="20" Foreground="#22C55E" HorizontalAlignment="Center"/>
                </StackPanel>
                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                    <TextBlock Text="Expenses" Opacity="0.7" HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding TotalExpenses, StringFormat=C2}" FontSize="20" Foreground="#EF4444" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <ScrollViewer Grid.Row="2" Margin="24,0,24,24">
            <ItemsControl ItemsSource="{Binding Transactions}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="16" Margin="0,4" Background="#2D2D2D" CornerRadius="8">
                            <Grid ColumnDefinitions="Auto,*,Auto,Auto">
                                <Border Width="40" Height="40" CornerRadius="20" Background="#3D3D3D" Margin="0,0,12,0">
                                    <TextBlock Text="{Binding Category.Icon}" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Description}" FontWeight="Medium"/>
                                    <TextBlock Text="{Binding Date, StringFormat='{}{0:MMM dd, yyyy}'}" Opacity="0.6" FontSize="12"/>
                                </StackPanel>
                                <TextBlock Grid.Column="2" Text="{Binding DisplayAmount}" FontWeight="Bold" VerticalAlignment="Center" Margin="12,0"/>
                                <StackPanel Grid.Column="3" Orientation="Horizontal" Spacing="4">
                                    <Button Content="âœï¸" Command="{Binding $parent[ItemsControl].((vm:TransactionsViewModel)DataContext).EditTransactionCommand}" CommandParameter="{Binding}" Background="Transparent"/>
                                    <Button Content="ðŸ—‘ï¸" Command="{Binding $parent[ItemsControl].((vm:TransactionsViewModel)DataContext).DeleteTransactionCommand}" CommandParameter="{Binding}" Background="Transparent"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</UserControl>
